(this.webpackJsonpstranger_things=this.webpackJsonpstranger_things||[]).push([[0],{31:function(e,t,s){"use strict";s.r(t);var n=s(0),r=s(3),c=s(1),a=s(18),o=s.n(a),i=s(6),j=s(2),l=s(5),b=s.n(l),d=s(9),u=function(e){var t=e.type,s=e.setToken,a=e.setUser,o=Object(c.useState)(""),l=Object(r.a)(o,2),u=l[0],h=l[1],p=Object(c.useState)(""),O=Object(r.a)(p,2),x=O[0],g=O[1],f="login"===t?"Login":"Register",m="login"===t?"Register":"Login",v="login"===t?"register":"login",k=Object(j.f)(),y=function(){var e=Object(d.a)(b.a.mark((function e(n){var r,c,o,i,j,l,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("clicked"),n.preventDefault(),e.next=4,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/users/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:u,password:x}})});case 4:return r=e.sent,e.next=7,r.json();case 7:if(c=e.sent,o=c.data,console.log({data:o}),!(i=null===o||void 0===o?void 0:o.token)){e.next=25;break}return s(i),e.next=15,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/users/me",{method:"GET",headers:{Authorization:"Bearer ".concat(i)}});case 15:return j=e.sent,e.next=18,j.json();case 18:l=e.sent,d=l.data,console.log(d),a(d),h(""),g(""),k.push("/profile");case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"login-form",children:[Object(n.jsx)("h2",{className:"account-form-title",children:f}),Object(n.jsxs)("form",{onSubmit:y,children:[Object(n.jsx)("input",{type:"text",value:u,onChange:function(e){return h(e.target.value)},placeholder:"username",required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"password",value:x,onChange:function(e){return g(e.target.value)},placeholder:"password",required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{type:"submit",children:f})]}),Object(n.jsxs)("p",{children:[" ",Object(n.jsxs)(i.b,{id:"register-or-login",to:"/".concat(v),children:[" ","login"===v?"Already have an account?":"Don't have an account?"," ",m," here. "]})]})]})})},h=function(e){var t=e.token,s=e.postId,a=Object(c.useState)(""),o=Object(r.a)(a,2),i=o[0],j=o[1],l=function(){var e=Object(d.a)(b.a.mark((function e(n){var r,c,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts/".concat(s,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({message:{content:i}})});case 3:return r=e.sent,e.next=6,r.json();case 6:c=e.sent,a=c.data,console.log(a),j("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("form",{onSubmit:l,id:"send-message-form",children:[Object(n.jsx)("textarea",{id:"text",value:i,onChange:function(e){j(e.target.value)},placeholder:"Type message to seller here"}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{type:"submit",id:"send-message-button",children:" SEND MESSAGE"})]})})},p=function(e){var t=e.token,s=e.id,r=e.fetchPosts,c=function(){var e=Object(d.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts/".concat(s),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:n=e.sent,console.log(n),r();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("button",{id:"delete-button",onClick:c,children:"DELETE"})},O=function(e){var t=e.token,s=e.setUser,a=Object(c.useState)([]),o=Object(r.a)(a,2),j=o[0],l=o[1],u=function(){var e=Object(d.a)(b.a.mark((function e(){var s,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts",{headers:{Authorization:"Bearer ".concat(t)}});case 2:return s=e.sent,e.next=5,s.json();case 5:n=e.sent,r=n.data.posts,l(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){u()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h1",{id:"post-header",children:["POSTS",t?Object(n.jsx)(i.b,{id:"add-post",to:"/new-post",children:"(ADD POST)"}):""," "]}),j.map((function(e){var r=e.title,c=e.price,a=e.location,o=e.description,i=e.createdAt,j=e._id,l=e.author,b=e.isAuthor,d=e.willDeliver;return console.log(e),console.log(d),Object(n.jsx)("div",{className:"post-container",children:Object(n.jsxs)("div",{className:"post",children:[Object(n.jsx)("h3",{id:"post-title",children:r}),Object(n.jsx)("br",{}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Price:"})," ",c]}),Object(n.jsx)("br",{}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Description:"})," ",o]}),Object(n.jsx)("br",{}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Location:"})," ",a]}),Object(n.jsx)("br",{}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Will Deliver?"})," ",!0===d?"Yes":"No"]}),Object(n.jsx)("br",{}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Seller:"})," ",l.username]}),Object(n.jsx)("br",{}),Object(n.jsxs)("p",{id:"created-at",children:["Created At: ",i]}),!0===b?Object(n.jsx)(p,{id:j,token:t,fetchPosts:u}):"",t&&!b?Object(n.jsx)(h,{token:t,setUser:s,postId:j}):""]})},j)}))]})},x=function(e){var t=e.token,s=Object(c.useState)(""),a=Object(r.a)(s,2),o=a[0],i=a[1],j=Object(c.useState)(""),l=Object(r.a)(j,2),u=l[0],h=l[1],p=Object(c.useState)(""),O=Object(r.a)(p,2),x=O[0],g=O[1],f=Object(c.useState)(""),m=Object(r.a)(f,2),v=m[0],k=m[1],y=Object(c.useState)(!1),S=Object(r.a)(y,2),P=S[0],T=S[1],C=function(){var e=Object(d.a)(b.a.mark((function e(s){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),console.log(o,u),console.log("clicked add post"),e.next=5,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({post:{title:o,description:u,price:x,location:v,willDeliver:P}})});case 5:return n=e.sent,e.next=8,n.json();case 8:r=e.sent,console.log(r),i(""),h(""),g(""),k(""),T(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{id:"create-post",children:Object(n.jsxs)("form",{id:"add-post-form",onSubmit:C,children:[Object(n.jsx)("h1",{id:"create-post-title",children:"Create Post"}),Object(n.jsx)("textarea",{value:o,onChange:function(e){return i(e.target.value)},placeholder:"title",required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("textarea",{id:"description",value:u,onChange:function(e){return h(e.target.value)},placeholder:"description",required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("textarea",{id:"price",value:x,onChange:function(e){return g(e.target.value)},placeholder:"price",required:!0}),Object(n.jsx)("textarea",{id:"location",value:v,onChange:function(e){return k(e.target.value)},placeholder:"location"}),Object(n.jsx)("br",{}),Object(n.jsx)("span",{id:"checkbox",children:"Willing to deliver? "}),Object(n.jsx)("input",{type:"checkbox",value:P,onChange:function(e){T(!0)},id:"delivery"}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{id:"create-post-button",type:"submit",children:"Create Post"})]})})},g=function(){return Object(n.jsxs)("div",{id:"home",children:[Object(n.jsx)("h1",{id:"welcome",children:" Welcome to Stranger's Things"}),Object(n.jsx)("p",{id:"slogan",children:"A fun place to buy a variety of items from strangers."}),Object(n.jsxs)("div",{id:"legal-disclaimer",children:[Object(n.jsx)("p",{children:"Legal Disclaimer:"}),Object(n.jsx)("p",{children:"Items sold on Stranger's Things have not been verified. Purchase these items at your own risk. Do not give personal information out - such as bank account or routing numbers, credit card information, house address, or social security numbers. Don't fall for scams. "})]}),Object(n.jsx)("p",{id:"if-you-accept",children:'If you accept these terms, click "I Accept" below.'}),Object(n.jsx)(i.b,{id:"i-accept",to:"/login",children:"I Accept"}),Object(n.jsxs)("footer",{children:["Copyright\xa9 2021 Stranger's Things Totally Fake Company USA, Inc.",Object(n.jsx)("br",{}),"All rights not reserved cause this isn't a real site."]})]})},f=function(e){e.token;var t=e.user,s=Object(c.useState)(t.messages?t.messages:[]),a=Object(r.a)(s,2),o=a[0];a[1];return Object(n.jsx)("div",{id:"message-container",children:o.map((function(e,s){return console.log(e),e.fromUser.username===t.username?Object(n.jsxs)("div",{className:"messages-from-me",children:[Object(n.jsx)("h3",{children:e.post.title}),Object(n.jsx)("p",{children:e.content}),Object(n.jsx)("p",{children:"From: Me"})]},s):Object(n.jsxs)("div",{className:"messages-to-me",children:[Object(n.jsx)("h3",{children:e.post.title}),Object(n.jsx)("p",{children:e.content}),Object(n.jsxs)("p",{children:["From: ",e.fromUser.username]})]},s)}))})},m=function(e){var t=e.token,s=e.setUser,a=e.user,o=Object(c.useState)(a.posts?a.posts:[]),i=Object(r.a)(o,2),j=i[0],l=i[1],u=function(){var e=Object(d.a)(b.a.mark((function e(){var n,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/users/me",{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,c=r.data,s(c),l(c.posts);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){u()}),[t]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{id:"my-posts-title",children:"My Posts:"}),j.map((function(e,s){var r=e.title,c=e.price,a=e.location,o=e.description,i=e.createdAt,j=(e.author,e.isAuthor,e._id),l=e.active;return console.log(l),l?Object(n.jsx)("div",{className:"post-container",children:Object(n.jsxs)("div",{className:"profile-post",children:[Object(n.jsx)("h3",{id:"post-title",children:r}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Price:"})," ",c]}),Object(n.jsx)("br",{}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Location:"})," ",a]}),Object(n.jsx)("br",{}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Description:"})," ",o]}),Object(n.jsx)("br",{}),Object(n.jsxs)("p",{id:"created-at",children:[Object(n.jsx)("b",{children:"Created At:"})," ",i]}),Object(n.jsx)(p,{id:j,token:t,fetchPosts:u})]})},s):null})),Object(n.jsx)("h1",{id:"my-messages-title",children:"Messages:"}),Object(n.jsx)(f,{user:a,token:t})]})},v=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),s=t[0],a=t[1],o=Object(c.useState)({}),l=Object(r.a)(o,2),b=l[0],d=l[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("header",{children:Object(n.jsxs)("nav",{id:"navigation",children:[Object(n.jsx)("img",{id:"logo",src:"/strangers-things-logo.png"}),Object(n.jsxs)("div",{id:"links",children:[Object(n.jsx)(i.b,{to:"/home",children:"Home"}),Object(n.jsx)(i.b,{to:"/posts",children:" Posts"})," ",s?Object(n.jsx)(i.b,{to:"/profile",children:" Profile"}):""," ",Object(n.jsx)(i.b,{onClick:function(){s&&(a(""),d({}))},to:"/login",children:s?"Logout":"Login"}),Object(n.jsx)("br",{}),b.username&&Object(n.jsxs)("div",{id:"logged-in-as",children:["Logged in as ",b.username]})]})]})}),Object(n.jsx)(j.b,{path:"/home",children:Object(n.jsx)(g,{})}),Object(n.jsx)(j.b,{exact:!0,path:"/",children:Object(n.jsx)(j.a,{to:"/home"})}),Object(n.jsx)(j.b,{path:"/login",children:Object(n.jsx)(u,{type:"login",setToken:a,setUser:d})}),Object(n.jsx)(j.b,{path:"/register",children:Object(n.jsx)(u,{type:"register",setToken:a,setUser:d})}),Object(n.jsx)(j.b,{path:"/posts",children:Object(n.jsx)(O,{token:s,setUser:d})}),Object(n.jsx)(j.b,{path:"/new-post",children:Object(n.jsx)(x,{token:s,setUser:d})}),Object(n.jsx)(j.b,{path:"/profile",children:Object(n.jsx)(m,{user:b,token:s,setUser:d})})]})};o.a.render(Object(n.jsx)(i.a,{children:Object(n.jsx)(v,{})}),document.getElementById("app"))}},[[31,1,2]]]);
//# sourceMappingURL=main.787e2dad.chunk.js.map